(this.webpackJsonpview=this.webpackJsonpview||[]).push([[0],{194:function(e,t,a){"use strict";a.r(t);var s,n=a(43),i=a.n(n),r=a(6),c=a(7),o=a(10),l=a(9),h=a(21),d=a(16),u=a(4),m=a.n(u),j=a(12),b=a(17),p=a(14),f=a(66),v=a(48),O=a.n(v),g=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,null,[{key:"getAuthToken",value:function(){return"Bearer "+sessionStorage.getItem("AccessToken")}},{key:"isLoggedIn",value:function(){return null!==sessionStorage.getItem("AccessToken")}},{key:"isNotLoggedIn",value:function(){return null===sessionStorage.getItem("AccessToken")}},{key:"getUser",value:function(){return{username:sessionStorage.getItem("username")}}},{key:"getUsername",value:function(){return sessionStorage.getItem("username")?String(sessionStorage.getItem("username")):"unknown user"}},{key:"logOut",value:function(){sessionStorage.clear(),window.location.href=Be}},{key:"getRefreshFeed",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t="refresh"+(e?"Own":"Friends")+"Feed";return Boolean(Number(sessionStorage.getItem(t)))}},{key:"setRefreshFeed",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a="refresh"+(t?"Own":"Friends")+"Feed";sessionStorage.setItem(a,String(Number(e)))}}]),e}(),x=a(0),y=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).abortController=void 0,s.state={isFollowing:!1,icon:p.o,buttonClass:"is-success",disableButton:g.getUsername()===s.props.username},s.abortController=new AbortController,fetch(Re+"users/getRelationship?user="+s.props.username,{method:"GET",headers:{Accept:"application/json",Authorization:g.getAuthToken()},signal:s.abortController.signal}).then((function(e){e.ok&&e.json().then((function(e){var t=e.following,a=e.blocked;s.setState({isFollowing:t,icon:a?p.c:t?p.d:p.o,buttonClass:a?"is-danger":s.state.buttonClass,disableButton:s.state.disableButton||a})}))})).catch((function(e){"AbortError"!==e.name&&console.log("Fetch failed:",e)})),s.followUser=s.followUser.bind(Object(j.a)(s)),s.unfollowUser=s.unfollowUser.bind(Object(j.a)(s)),s.updateIcon=s.updateIcon.bind(Object(j.a)(s)),s}return Object(c.a)(a,[{key:"scrollInputContent",value:function(e){var t=e.target;t.scrollBy({left:"mouseout"===e.type?-t.scrollWidth:t.scrollWidth,behavior:"smooth"})}},{key:"followUser",value:function(e){var t=this;this.state.disableButton||fetch(Re+"users/follow",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:g.getAuthToken()},body:JSON.stringify({followed:this.props.username}),signal:this.abortController.signal}).then((function(e){t.setState({isFollowing:e.ok,icon:e.ok?p.n:p.e,buttonClass:"is-danger"}),e.ok&&g.setRefreshFeed(!0,!1)})).catch((function(e){"AbortError"!==e.name&&console.log("Fetch failed:",e)}))}},{key:"unfollowUser",value:function(e){var t=this;this.state.disableButton||fetch(Re+"users/unfollow",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:g.getAuthToken()},body:JSON.stringify({unfollowed:this.props.username}),signal:this.abortController.signal}).then((function(e){t.setState({isFollowing:!e.ok,icon:e.ok?p.o:p.e,buttonClass:e.ok?"is-success":"is-danger"}),e.ok&&g.setRefreshFeed(!0,!1)})).catch((function(e){"AbortError"!==e.name&&console.log("Fetch failed:",e)}))}},{key:"updateIcon",value:function(e){if(!this.state.disableButton){var t=this.state.isFollowing,a="mouseenter"===e.type;this.setState({icon:t?a?p.n:p.d:this.state.icon,buttonClass:t?a?"is-danger":"is-success":this.state.buttonClass})}}},{key:"componentWillUnmount",value:function(){this.abortController.abort()}},{key:"render",value:function(){return Object(x.jsx)("div",{className:"dropdown-item",children:Object(x.jsxs)("div",{className:"field has-addons",children:[Object(x.jsx)("div",{className:"control",children:Object(x.jsx)(h.b,{to:"/users/"+this.props.username,children:Object(x.jsx)("input",{className:"input is-static searchResult",type:"text",value:this.props.username,readOnly:!0,onMouseOver:this.scrollInputContent,onMouseOut:this.scrollInputContent})})}),Object(x.jsx)("div",{className:"control",children:Object(x.jsx)("button",{className:"button ".concat(this.state.buttonClass," is-inverted"),onClick:this.state.isFollowing?this.unfollowUser:this.followUser,onMouseEnter:this.updateIcon,onMouseLeave:this.updateIcon,onMouseDown:function(e){return e.preventDefault()},disabled:this.state.disableButton,children:Object(x.jsx)("span",{className:"icon is-small",children:Object(x.jsx)(b.a,{icon:this.state.icon})})})})]})})}}]),a}(m.a.Component),N=a(95),C=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={},s}return Object(c.a)(a,[{key:"render",value:function(){return 0===this.props.message.length?"":Object(x.jsxs)("div",{className:"notification ".concat(this.props.type),children:[this.props.hasDelete?Object(x.jsx)("button",{type:"button",className:"delete"}):"",Object(N.a)(this.props.message)]})}}]),a}(u.Component),k=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).abortController=void 0,s.searchDelay=void 0,s.state={searchQuery:"",searchResults:Object(x.jsx)(x.Fragment,{}),displayLoading:!1},s.abortController=new AbortController,s.updateSearch=s.updateSearch.bind(Object(j.a)(s)),s}return Object(c.a)(a,[{key:"updateSearch",value:function(e){var t=this,a=String(e.target.value).replaceAll(" ","");this.setState({searchQuery:a,searchResults:Object(x.jsx)(x.Fragment,{}),displayLoading:!0},(function(){clearTimeout(t.searchDelay),""!==a&&(t.searchDelay=setTimeout((function(){t.searchFor(a)}),1e3))}))}},{key:"searchFor",value:function(e){var t=this;fetch(Re+"users/search?query="+e,{method:"GET",headers:{Accepts:"application/json",Authorization:g.getAuthToken()},signal:this.abortController.signal}).then((function(a){a.ok?a.json().then((function(a){var s=Object(x.jsx)(C,{message:"User '".concat(e,"' could not be found!"),type:"is-danger is-light mx-2",hasDelete:!1});if(a.userFound)for(var n in s=JSON.parse(a.users))s.hasOwnProperty(n)&&(s[n]=Object(x.jsx)(y,{username:s[n]},"result_"+s[n]));t.setState({displayLoading:!1,searchResults:s})})):a.text().then((function(e){return console.log(e)}))})).catch((function(e){"AbortError"!==e.name&&console.log("Fetch failed:",e)}))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.searchDelay),this.abortController.abort()}},{key:"render",value:function(){return Object(x.jsxs)("div",{className:"dropdown ".concat(""!==this.state.searchQuery?"is-active":""),children:[Object(x.jsx)("div",{className:"dropdown-trigger",children:Object(x.jsx)("div",{className:"field",children:Object(x.jsxs)("div",{className:"control is-expanded has-icons-right",children:[Object(x.jsx)("input",{className:"input is-primary",type:"search",value:this.state.searchQuery,placeholder:"Search for other users",maxLength:30,onChange:this.updateSearch}),Object(x.jsx)("span",{className:"icon is-small is-right",children:Object(x.jsx)(b.a,{icon:p.h})})]})})}),Object(x.jsx)("div",{className:"dropdown-menu",children:Object(x.jsx)("div",{className:"dropdown-content",children:this.state.displayLoading?Object(x.jsx)("div",{className:"dropdown-item",children:Object(x.jsxs)("div",{className:"field has-addons",children:[Object(x.jsx)("div",{className:"control",children:Object(x.jsx)("input",{className:"input is-static",type:"text",placeholder:"Searching...",readOnly:!0})}),Object(x.jsx)("div",{className:"control",children:Object(x.jsx)("button",{className:"button is-loading is-white",disabled:!0})})]})}):Object(x.jsx)(O.a,{transitionDuration:300,children:this.state.searchResults})})})]})}},{key:"handleClickOutside",value:function(){""!==this.state.searchQuery&&this.setState({searchQuery:"",searchResults:Object(x.jsx)(x.Fragment,{}),displayLoading:!1})}}]),a}(m.a.Component),w=Object(f.default)(k),S=a(15),A=a(32),T=a.n(A),D=a(57),F=(a(63),function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).abortController=void 0,s.abortController=new AbortController,s.handleSubmit=s.handleSubmit.bind(Object(j.a)(s)),s}return Object(c.a)(a,[{key:"handleSubmit",value:function(e){e.preventDefault(),fetch(Re+"googlefit/getURLTing",{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:g.getAuthToken()},signal:this.abortController.signal}).then((function(e){200===e.status?e.json().then((function(e){window.location=e.url})):console.log("Looks like there was a problem. Status Code: "+e.status)})).catch((function(e){"AbortError"!==e.name&&console.log("Fetch failed:",e)}))}},{key:"componentWillUnmount",value:function(){this.abortController.abort()}},{key:"render",value:function(){return Object(x.jsx)("div",{className:"container",children:Object(x.jsx)("button",{type:"submit",className:"button is-black is-outlined",onClick:this.handleSubmit,children:"Import Data from GoogleFit"})})}}]),a}(u.Component)),I={sport:0,sportClass:"",duration:0,durationClass:"",durationIcon:p.l,durationIconClass:"",durationMul:60,distance:0,distanceClass:"",distanceIcon:p.l,distanceIconClass:"",distanceMul:1,averageHeartRate:0,averageHeartRateClass:"",averageHeartRateIcon:p.l,averageHeartRateIconClass:"",altitudeDifference:0,altitudeDifferenceClass:"",altitudeDifferenceIcon:p.l,altitudeDifferenceIconClass:"",date:new Date},E={notifyMessage:"",notifyType:""},M=[I,E],P=Object.assign({},I,E);!function(e){e[e.ACTIVITY=0]="ACTIVITY",e[e.NOTIFICATION=1]="NOTIFICATION"}(s||(s={}));var U="Please try again later and contact an administrator.",L={fetchFailed:["No sports found!<br />"+U,"is-danger"],success:["Your activity was saved successfully ","is-success"],error:["Something went wrong!<br />"+U,"is-danger"],unknownUser:["Your username wasn't found!<br />Please log-in or contact an administrator if you believe this is an error.","is-danger"]},_=[{identifier:"distance",validValues:[0,40075e3],hasIcon:!0,inputLabel:"Distance",inputType:"number",inputPlaceholder:"Please enter the covered distance",multiplier:{dist_m:[1,"m"],dist_km:[1e3,"km"]}},{identifier:"duration",validValues:[0,604800],hasIcon:!0,inputLabel:"Duration",inputType:"number",inputPlaceholder:"Please enter the duration of the activity",multiplier:{dur_s:[1,"s"],dur_m:[60,"m"],dur_h:[3600,"h"]}},{identifier:"pace",validValues:[0,null],hasIcon:!1},{identifier:"averageHeartRate",validValues:[25,250],hasIcon:!0,inputLabel:"Heart Rate",inputType:"number",inputPlaceholder:"Please insert your average heart rate"},{identifier:"altitudeDifference",validValues:[0,40075e3],hasIcon:!0,inputLabel:"Altitude Difference",inputType:"number",inputPlaceholder:"Please enter the altitude difference of the activity",multiplier:{alt_m:[1,"m"],alt_km:[1e3,"km"]}},{identifier:"sport",validValues:[0,null],hasIcon:!1}],R=_.length-1,B=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).abortController=void 0,s.mandatoryParams=[],s.optParams=[],s.state=Object.assign({},P),s.abortController=new AbortController,s.handleChange=s.handleChange.bind(Object(j.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(j.a)(s)),s.handleReset=s.handleReset.bind(Object(j.a)(s)),s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=document.getElementById("submit-activity");e&&this.setState({submitButton:e})}},{key:"componentWillUnmount",value:function(){this.abortController.abort()}},{key:"componentDidUpdate",value:function(e,t,a){e.sports!==this.props.sports&&0===Object.keys(this.props.sports).length&&this.setState({notifyMessage:L.fetchFailed[0],notifyType:L.fetchFailed[1]}),t.sport!==this.state.sports&&(isNaN(this.state.sports)||(this.mandatoryParams=[],this.optParams=[]))}},{key:"handleChange",value:function(e){var t=e.target,a=t.value,s=t.name;if(!(a<0)){var n=null;for(var i in _){var r=_[i];if(r.identifier===s){n=r;break}}if(n){var c,o=this.isValid(a,n.validValues,"sport"===s,this.state[s+"Mul"]),l=n.hasIcon;if(this.setState(Object(S.a)({},s+"Class",o?"is-success":"")),l)this.setState((c={},Object(S.a)(c,s+"Icon",o?p.d:p.l),Object(S.a)(c,s+"IconClass",o?"has-text-success":""),c))}else if(s.includes("Mul")){var h=this.state[s]/a,d=s.replace("Mul",""),u=Math.round(this.state[d]*h*100)/100;this.setState(Object(S.a)({},d,isNaN(u)?0:u))}isNaN(a)?this.setState(Object(S.a)({},s,"NaN"===a?0:a)):this.setState(Object(S.a)({},s,Number(a)))}}},{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),!this.state.submitButton.hasAttribute("disabled")&&this.validateInput(!0)){var a={sport:this.state.sport};for(var n in this.mandatoryParams){var i=_[n],r=this.state[i.identifier],c=this.state[i.identifier+"Mul"];(this.mandatoryParams[n]||this.optParams[n]&&this.isValid(r,i.validValues,!1,c))&&(c>1&&(r*=c),a[i.identifier]=r)}a.distance>0&&a.duration>0&&(a.pace=a.distance/a.duration*3.6),a.startedAt=(this.state.date<this.getMaxValidDate()?this.state.date:this.getMaxValidDate()).toISOString().slice(0,19).replace("T"," "),fetch(Re+"activity/add",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:g.getAuthToken()},body:JSON.stringify(a),signal:this.abortController.signal}).then((function(e){e.ok?(t.setState({notifyMessage:L.success[0],notifyType:L.success[1]}),g.setRefreshFeed(!0),t.allowSubmit(!1),t.resetState(s.ACTIVITY)):e.text().then((function(e){try{var a=JSON.parse(e);t.handleError(a.message,1===a.errno)}catch(s){t.handleError("Invalid JSON response")}}))})).catch((function(e){"AbortError"!==e.name&&t.handleError(e)}))}}},{key:"handleReset",value:function(e){e.preventDefault(),this.resetState(s.NOTIFICATION),this.resetState(s.ACTIVITY),this.allowSubmit(!1)}},{key:"handleError",value:function(e,t){console.log("Error after adding activity to database: ",e),this.notifyError(t?"unknownUser":"error")}},{key:"render",value:function(){return Object(x.jsxs)("form",{onSubmit:this.handleSubmit,onReset:this.handleReset,children:[Object(x.jsx)(C,{message:this.state.notifyMessage,type:this.state.notifyType,hasDelete:!1}),Object(x.jsx)("label",{className:"label",children:"Sport"}),Object(x.jsx)("div",{className:"select is-fullwidth ".concat(this.state.sportClass),children:Object(x.jsx)("select",{name:"sport",onChange:this.handleChange,value:this.state.sport,children:this.state.notifyMessage!==L.fetchFailed[0]?this.createSportSelect():Object(x.jsx)("option",{value:"-1",children:"Something went wrong!"},"-1")})}),"is-success"===this.state.sportClass?this.createFormFields():Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"divider",children:"Import"}),Object(x.jsx)(F,{})]})]})}},{key:"createSportSelect",value:function(){var e=[];for(var t in e.push(Object(x.jsx)("option",{value:"0"},"0")),this.props.sports)e.push(Object(x.jsx)("option",{value:t,children:t},t));return e}},{key:"createFormFields",value:function(){var e=this,t=function(t){var a=t.identifier;return"pace"!==a?t.multiplier?Object(x.jsxs)("div",{className:"field",children:[Object(x.jsx)("label",{className:"label",children:t.inputLabel}),Object(x.jsxs)("div",{className:"field has-addons",children:[Object(x.jsxs)("div",{className:"control has-icons-right is-expanded",children:[Object(x.jsx)("input",{className:"input ".concat(e.state[a+"Class"]),type:t.inputType,name:a,placeholder:t.inputPlaceholder,value:0===Number(e.state[a])?"":e.state[a],min:t.validValues[0],max:t.validValues[1],onChange:e.handleChange}),Object(x.jsx)("span",{className:"icon is-right ".concat(e.state[a+"IconClass"]),children:Object(x.jsx)(b.a,{icon:e.state[a+"Icon"]})})]}),Object(x.jsx)("div",{className:"control",children:Object(x.jsx)("div",{className:"select ".concat(e.state[a+"Class"]," is-fullwidth"),children:Object(x.jsx)("select",{name:a+"Mul",value:e.state[a+"Mul"],onChange:e.handleChange,children:function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push(Object(x.jsx)("option",{value:e[a][0],children:e[a][1]},a));return t}(t.multiplier)})})})]})]},"inputField_"+a):Object(x.jsxs)("div",{className:"field",children:[Object(x.jsx)("label",{className:"label",children:t.inputLabel}),Object(x.jsx)("div",{className:"field",children:Object(x.jsxs)("div",{className:"control has-icons-right",children:[Object(x.jsx)("input",{className:"input ".concat(e.state[a+"Class"]),type:t.inputType,name:a,placeholder:t.inputPlaceholder,value:0===Number(e.state[a])?"":e.state[a],min:t.validValues[0],max:t.validValues[1],onChange:e.handleChange}),Object(x.jsx)("span",{className:"icon is-right ".concat(e.state[a+"IconClass"]),children:Object(x.jsx)(b.a,{icon:e.state[a+"Icon"]})})]})})]},"inputField_"+a):Object(x.jsx)("div",{},"input_empty_div")};if("is-success"===this.state.sportClass){for(var a=this.props.sports[this.state.sport],s=a[1].toString(2).split("").map((function(e){return Boolean(Number(e))})).reverse(),n=a[0].toString(2).split("").map((function(e){return Boolean(Number(e))})).reverse(),i=0;i<R-s.length;i++)s.push(!1);for(var r=0;r<R-n.length;r++)n.push(!1);s=s.reverse(),n=n.reverse();var c=[Object(x.jsx)("div",{className:"divider",children:"Mandatory"},"input_divider_man")];for(var o in s)s[o]&&(c.push(t(_[o])),n[o]&&(n[o]=!1));for(var l in c.push(Object(x.jsx)("div",{className:"divider",children:"Optional"},"input_divider_opt")),n)n[l]&&c.push(t(_[l]));return c.push(Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{className:"label",children:"Date and Time"}),Object(x.jsx)(T.a,{dateFormat:"dd.MM.yyyy HH:mm",showTimeSelect:!0,timeIntervals:15,timeFormat:"HH:mm",maxDate:this.getMaxValidDate(),selected:this.state.date,locale:D.a,onChange:function(t){return e.setState({date:t})},filterTime:function(t){var a=e.getMaxValidDate(),s=new Date(e.state.date);return s.setHours(t.getHours()),s.setMinutes(t.getMinutes()),s<a},inline:!0})]},"inputField_date")),this.mandatoryParams=s,this.optParams=n,this.validateInput(),c}return Object(x.jsx)("p",{className:"tag is-info mt-4",children:"Please select a sport"},"inputField_sportInfo")}},{key:"validateInput",value:function(e){var t=this.isValid(this.state.sport,_[R].validValues,!0);for(var a in this.mandatoryParams)if(this.mandatoryParams[a]){var s=_[a],n=s.identifier;t=t&&this.isValid(this.state[n],s.validValues,"pace"===n,this.state[n+"Mul"])}if(this.state.submitButton&&this.allowSubmit(t),e)return t}},{key:"isValid",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=t[0],i=t[1];return e=Number(e),isNaN(e)?a:(s&&s>0&&(e*=s),n<e&&(!i||e<i))}},{key:"allowSubmit",value:function(e){e?this.state.submitButton.removeAttribute("disabled"):this.state.submitButton.setAttribute("disabled","")}},{key:"resetState",value:function(e){this.setState(M[e])}},{key:"getMaxValidDate",value:function(){return new Date(Date.now()-this.state.duration*this.state.durationMul*1e3)}},{key:"notifyError",value:function(e){this.setState({notifyMessage:L[e][0],notifyType:L[e][1]})}}]),a}(u.Component),z=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).abortController=void 0,s.state={showPopup:!1,active:!1,sports:{}},s.abortController=new AbortController,s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=document.getElementById("submit-activity");e&&e.setAttribute("disabled","")}},{key:"componentWillUnmount",value:function(){this.abortController.abort()}},{key:"toggleActive",value:function(){var e=this,t=!this.state.active;this.setState({active:t}),t?fetch(Re+"sports/fetch",{method:"GET",headers:{Accepts:"application/json",Authorization:g.getAuthToken()},signal:this.abortController.signal}).then((function(t){return t.ok?t.json().then((function(t){e.setState({sports:JSON.parse(t.body)})})):t.json().then((function(t){console.log("Sport Fetch failed:",t),e.setState({sports:{}})}))})).catch((function(e){"AbortError"!==e.name&&console.log("Fetch failed:",e)})):document.forms[0].reset()}},{key:"render",value:function(){var e=this;return Object(x.jsxs)("section",{className:"main",children:[Object(x.jsxs)("div",{className:"modal ".concat(this.state.active?"is-active":""),children:[Object(x.jsx)("div",{className:"modal-background"}),Object(x.jsxs)("div",{className:"modal-card",children:[Object(x.jsxs)("header",{className:"modal-card-head",children:[Object(x.jsx)("p",{className:"modal-card-title",children:"Add Activity"}),Object(x.jsx)("button",{className:"delete","aria-label":"close",onClick:function(){return e.toggleActive()}})]}),Object(x.jsx)("section",{className:"modal-card-body",children:Object(x.jsx)("div",{className:"content",children:Object(x.jsx)(B,{sports:this.state.sports})})}),Object(x.jsxs)("footer",{className:"modal-card-foot",children:[Object(x.jsxs)("button",{className:"button is-success",id:"submit-activity",onClick:function(){return document.forms[0].requestSubmit()},children:[Object(x.jsx)("span",{className:"icon is-small",children:Object(x.jsx)(b.a,{icon:p.d})}),Object(x.jsx)("span",{children:"Save"})]}),Object(x.jsxs)("button",{className:"button is-danger is-outlined",onClick:function(){return e.toggleActive()},children:[Object(x.jsx)("span",{className:"icon is-small",children:Object(x.jsx)(b.a,{icon:p.l})}),Object(x.jsx)("span",{children:"Cancel"})]})]})]})]}),Object(x.jsx)("button",{className:"button is-primary is-rounded",onClick:function(){return e.toggleActive()},children:Object(x.jsx)("span",{className:"icon",children:Object(x.jsx)(b.a,{icon:p.g})})})]})}}]),a}(m.a.Component),V=a.p+"static/media/Logo.bc3c7482.png",J=function(){return Object(x.jsx)("div",{id:"header",children:Object(x.jsxs)("nav",{className:"navbar p-2 is-dark",children:[Object(x.jsx)("img",{src:V,alt:"Logo",width:250}),Object(x.jsx)("div",{className:"navbar-end",children:g.isLoggedIn()?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"navbar-item",children:Object(x.jsx)(w,{})}),Object(x.jsxs)(h.b,{className:"navbar-item",to:"/",children:[Object(x.jsx)("span",{className:"icon",children:Object(x.jsx)(b.a,{icon:p.f})}),Object(x.jsx)("div",{children:"Home"})]}),Object(x.jsxs)(h.b,{className:"navbar-item",to:"/profile",children:[Object(x.jsx)("span",{className:"icon",children:Object(x.jsx)(b.a,{icon:p.m})}),Object(x.jsx)("div",{children:"Profile"})]}),Object(x.jsx)("div",{className:"navbar-item",children:Object(x.jsx)(z,{})}),Object(x.jsx)("span",{className:"navbar-item",children:Object(x.jsxs)(h.b,{className:"button is-primary is-inverted",to:"/login",onClick:function(){return g.logOut()},children:[Object(x.jsx)("span",{className:"icon",children:Object(x.jsx)(b.a,{icon:p.i})}),Object(x.jsx)("span",{children:"Logout"})]})})]}):Object(x.jsxs)("div",{className:"navbar-end",children:[Object(x.jsx)("div",{className:"navbar-item px-1",children:Object(x.jsx)(h.b,{className:"button is-primary",to:"/login",children:"Sign in"})}),Object(x.jsx)("div",{className:"navbar-item px-1",children:Object(x.jsx)(h.b,{className:"button is-light",to:"/sign-up",children:"Sign up"})})]})})]})})},H=function(){return Object(x.jsx)("footer",{id:"footer",className:"p-5",children:Object(x.jsx)("div",{className:"content has-text-centered",children:Object(x.jsxs)("p",{children:["The source code is licensed under the ",Object(x.jsx)("a",{href:"http://opensource.org/licenses/mit-license.php",children:"MIT"})," License. Please contact the admin to receive further information. Uses ",Object(x.jsx)("a",{href:"https://icons8.com/",children:" Icons8"})," Icons."]})})})},W=(a(93),a(98)),Y=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,null,[{key:"fillZeros",value:function(e){return e<10?"0"+e:e}},{key:"formatCommentDate",value:function(t){var a="",s=Math.round(((new Date).getTime()-t.getTime())/1e3/60);if(0===s)return"Just now";if(s<60)a=s+" minute"+(1===s?"":"s");else{var n=Math.round(s/60);if(n<24)a=n+" hour"+(1===n?"":"s");else{var i=Math.round(n/24);if(!(i<15))return e.formatDate(t);a=i+" day"+(1===i?"":"s")}}return a+" ago"}},{key:"formatDate",value:function(t){return e.fillZeros(t.getDate())+"."+e.fillZeros(t.getMonth()+1)+"."+t.getUTCFullYear()}},{key:"formatTime",value:function(t){return e.fillZeros(t.getHours())+":"+e.fillZeros(t.getMinutes())}},{key:"formatDateTime",value:function(t){return e.formatDate(t)+", "+e.formatTime(t)}},{key:"format_MeterKilometer",value:function(e){return e<1e3?e+" m":(e/1e3).toFixed(1)+" km"}},{key:"format_ActivityDuration",value:function(t){var a=Math.round(t/60);if(a<60)return e.fillZeros(a)+":"+e.fillZeros(t%60)+" min";var s=Math.round(a/60);return s<24?e.fillZeros(s)+":"+e.fillZeros(a%60)+" hours":Math.round(s/24)+" days "+(s%24===0?"":s%24+" hours")}},{key:"format_pace",value:function(e){return e.toFixed(1)+" km/h"}},{key:"format_heartRate",value:function(e){return e+" bpm"}}]),e}(),q=function(e){return Object(x.jsx)("article",{className:"media",children:Object(x.jsx)("div",{className:"media-content",children:Object(x.jsxs)("div",{className:"content has-text-left",children:[e.newUser?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("strong",{children:e.comment.name}),Object(x.jsx)("br",{})]}):Object(x.jsx)(x.Fragment,{}),e.comment.text,Object(x.jsx)("br",{}),Object(x.jsx)("p",{className:"is-size-7",children:Y.formatCommentDate(new Date(Date.parse(e.comment.timestamp)))})]})})})},G=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).commentRefreshInterval=void 0,s.abortController=void 0,s.state={comments:[],numComments:5,activity:e.activity_id},s.abortController=new AbortController,s.refreshComments(),s.commentRefreshInterval=setInterval((function(){s.refreshComments()}),15e3),s.handleChange=s.handleChange.bind(Object(j.a)(s)),s.loadMoreComments=s.loadMoreComments.bind(Object(j.a)(s)),s}return Object(c.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.value,s=t.name;this.setState(Object(S.a)({},s,a))}},{key:"refreshComments",value:function(){var e=this;fetch(Re+"interaction/commentIsNew?activity="+this.state.activity,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:g.getAuthToken()},signal:this.abortController.signal}).then((function(t){t.ok?t.json().then((function(t){e.setState({comments:t.Rowdata})})):console.log("Looks like there was a problem. Status Code: "+t.status)})).catch((function(e){"AbortError"!==e.name&&console.log("Fetch failed:",e)}))}},{key:"loadMoreComments",value:function(){this.setState({numComments:this.state.numComments+5})}},{key:"renderComments",value:function(){var e=this.state.comments.length;if(e>0){var t=[],a=this.state.numComments;e>a&&t.push(Object(x.jsx)("button",{className:"button",onClick:this.loadMoreComments,children:"Load older comments"},"loadMore_"+this.props.activity_id));for(var s=e-a,n=s;n<e;n++){var i=this.state.comments[n];if(i){var r=this.state.comments[n-1],c=r&&n!==s?r.name:"";t.push(Object(x.jsx)(q,{comment:i,newUser:i.name!==c},i.id))}}return t}return Object(x.jsx)("p",{className:"tag is-primary is-medium",children:"No Comments here yet. Be the first!"})}},{key:"componentWillUnmount",value:function(){clearInterval(this.commentRefreshInterval),this.abortController.abort()}},{key:"render",value:function(){return Object(x.jsx)("div",{className:"container",children:this.renderComments()})}}]),a}(u.Component),Z={distance:{title:"Distance",format:function(e){return Y.format_MeterKilometer(e)}},duration:{title:"Duration",format:function(e){return Y.format_ActivityDuration(e)}},pace:{title:"Speed",format:function(e){return Y.format_pace(e)}},averageHeartRate:{title:"Average heart rate",format:function(e){return Y.format_heartRate(e)}},altitudeDifference:{title:"Altitude",format:function(e){return Y.format_MeterKilometer(e)}}},Q=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).thumbsRefreshInterval=void 0,s.abortController=void 0,s.state={showThumbsUp:s.props.postData.thumbUp,thumbsUpCounter:s.props.postData.likes},s.abortController=new AbortController,s.thumbIsPressed=s.thumbIsPressed.bind(Object(j.a)(s)),s}return Object(c.a)(a,[{key:"thumbIsPressed",value:function(e){var t=this;fetch(Re+"interaction/thumbsUp",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:g.getAuthToken()},body:JSON.stringify({activity:this.props.postData.activity_id}),signal:this.abortController.signal}).then((function(e){if(e.ok){var a=t.state.showThumbsUp;t.setState({showThumbsUp:!a,thumbsUpCounter:a?t.state.thumbsUpCounter-1:t.state.thumbsUpCounter+1})}else e.text().then((function(e){return console.log(e)}))})).catch((function(e){"AbortError"!==e.name&&console.log("Fetch failed:",e)}))}},{key:"componentWillUnmount",value:function(){clearInterval(this.thumbsRefreshInterval),this.abortController.abort()}},{key:"render",value:function(){var e=this.props.postData,t=e.sport+".png";return Object(x.jsxs)("div",{className:"card",children:[Object(x.jsxs)("div",{className:"card-content",children:[Object(x.jsxs)("div",{className:"media",children:[Object(x.jsx)("figure",{className:"image is-32x32",children:Object(x.jsx)("img",{src:t,alt:"product"})}),Object(x.jsxs)("div",{className:"media-content has-text-left\tpl-2",children:[Object(x.jsx)("p",{className:"title is-4",children:e.sport}),Object(x.jsxs)("p",{className:"subtitle is-6",children:[Object(x.jsx)("time",{children:Y.formatDateTime(new Date(Date.parse(String(e.addedAt))))}),this.props.ownFeed?"":Object(x.jsxs)(x.Fragment,{children:[" - ",Object(x.jsxs)(h.b,{className:"has-text-primary",to:"/users/".concat(e.username),children:["@",e.username]})]})]})]}),Object(x.jsx)("div",{className:"field has-addons",children:Object(x.jsxs)("button",{className:"button is-rounded ".concat(this.state.showThumbsUp?"is-success":""),onClick:this.thumbIsPressed,children:[Object(x.jsx)("span",{children:Number(this.state.thumbsUpCounter)}),Object(x.jsx)("span",{className:"icon",children:Object(x.jsx)(b.a,{icon:p.k})})]})})]}),Object(x.jsx)("div",{className:"content ",children:Object(x.jsx)($,{activityData:e.activityData})})]}),Object(x.jsx)("div",{className:"card-footer",children:Object(x.jsx)(K,{activity_id:e.activity_id})})]})}}]),a}(m.a.Component),$=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"renderTableHeaders",value:function(e){return Object.keys(e).map((function(e){return Object(x.jsx)("th",{children:Z[e].title},e)}))}},{key:"renderTableContents",value:function(e){var t=Object.keys(e),a=Object.values(e);return t.map((function(e,t){return Object(x.jsx)("th",{children:Z[e].format(a[t])},e)}))}},{key:"render",value:function(){var e=this;return Object.keys(this.props.activityData).forEach((function(t){return null===e.props.activityData[t]&&delete e.props.activityData[t]})),Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("table",{className:"table is-narrow",children:[Object(x.jsx)("thead",{children:Object(x.jsx)("tr",{children:this.renderTableHeaders(this.props.activityData)})}),Object(x.jsx)("tbody",{children:Object(x.jsx)("tr",{children:this.renderTableContents(this.props.activityData)})})]})})}}]),a}(m.a.Component),K=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).commentContainerChild=void 0,s.state={showComments:!1,commentText:""},s.handleCommentSubmit=s.handleCommentSubmit.bind(Object(j.a)(s)),s.commentContainerChild=m.a.createRef(),s}return Object(c.a)(a,[{key:"handleCommentSubmit",value:function(e){var t=this,a=this.state.commentText;a.length>0&&fetch(Re+"interaction/addComment",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:g.getAuthToken()},body:JSON.stringify({text:a,activity:this.props.activity_id})}).then((function(e){var a;e.ok&&(t.setState({commentText:""}),null===(a=t.commentContainerChild.current)||void 0===a||a.refreshComments())}))}},{key:"render",value:function(){var e=this;return Object(x.jsxs)("div",{className:"card is-flex-grow-1",children:[Object(x.jsxs)("header",{className:"card-header",children:[Object(x.jsx)("p",{className:"card-header-title",children:"Comments"}),Object(x.jsx)("button",{className:"card-header-icon",onClick:function(){return e.setState({showComments:!e.state.showComments})},"aria-label":"more options",style:{border:"none",backgroundColor:"inherit"},children:Object(x.jsx)("span",{className:"icon",children:Object(x.jsx)(b.a,{icon:this.state.showComments?p.b:p.a})})})]}),this.state.showComments?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"card-content",children:Object(x.jsx)(G,{activity_id:this.props.activity_id,ref:this.commentContainerChild})}),Object(x.jsx)("footer",{className:"card-footer",children:Object(x.jsx)("div",{className:"card-footer-item",children:Object(x.jsxs)("div",{className:"field has-addons is-flex-grow-1",children:[Object(x.jsxs)("div",{className:"control is-expanded",children:[Object(x.jsx)("input",{className:"input",type:"text",value:this.state.commentText,maxLength:500,placeholder:"Add your comment",onChange:function(t){return e.setState({commentText:t.target.value})},onKeyUp:function(t){13===t.keyCode&&e.handleCommentSubmit(t)}}),this.state.commentText.length>0?Object(x.jsxs)("p",{className:"help is-light ".concat(500===this.state.commentText.length?"is-danger":this.state.commentText.length>=450?"is-warning":"is-success"),children:[500-this.state.commentText.length," chars remaining!"]}):Object(x.jsx)(x.Fragment,{})]}),Object(x.jsx)("div",{className:"control",children:Object(x.jsx)("button",{className:"button is-primary",disabled:0===this.state.commentText.length,onClick:this.handleCommentSubmit,children:"Send"})})]})})})]}):Object(x.jsx)(x.Fragment,{})]})}}]),a}(m.a.Component),X=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).abortController=void 0,s.refreshInterval=void 0,s.state={postData:[],loaded:!1,hasMore:!0,refreshAnimation:!0},s.abortController=new AbortController,s.refreshInterval=setInterval((function(){g.getRefreshFeed(e.ownFeed)&&(g.setRefreshFeed(!1,e.ownFeed),s.refresh())}),1e3),s.getFeed=s.getFeed.bind(Object(j.a)(s)),s.refresh=s.refresh.bind(Object(j.a)(s)),s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getFeed(),this.setState({loaded:!0})}},{key:"componentWillUnmount",value:function(){clearInterval(this.refreshInterval),this.abortController.abort()}},{key:"getFeed",value:function(){var e=this,t=this.props.ownFeed?"own":"following",a=Re+"feed/"+t+"?offset="+this.state.postData.length;fetch(a,{method:"GET",headers:{Accepts:"application/json",Authorization:g.getAuthToken()},signal:this.abortController.signal}).then((function(t){if(t.ok)return t.json().then((function(t){var a=t.activities;e.setState({postData:e.state.postData.concat(a),hasMore:5===a.length})}))})).catch((function(e){"AbortError"!==e.name&&console.log("Fetch failed:",e)}))}},{key:"refresh",value:function(){var e=this;this.setState({postData:[],refreshAnimation:!0},(function(){e.getFeed(),e.setState({refreshAnimation:!1})}))}},{key:"render",value:function(){var e=this;return Object(x.jsx)(x.Fragment,{children:this.state.loaded?Object(x.jsxs)("div",{children:[this.props.ownFeed?"":Object(x.jsx)("button",{className:"button mb-4 is-success",onClick:this.refresh,children:Object(x.jsx)(b.a,{icon:p.j})}),Object(x.jsx)(W.a,{dataLength:this.state.postData.length,next:this.getFeed,hasMore:this.state.hasMore,loader:Object(x.jsx)("div",{className:"box",children:Object(x.jsx)("div",{className:"control is-loading",children:Object(x.jsx)("input",{className:"input is-static",type:"text",readOnly:!0,placeholder:"Loading ... "})})}),endMessage:Object(x.jsx)("p",{className:"tag is-primary is-medium mb-5",children:"No new activities found"}),scrollThreshold:.9,scrollableTarget:"col-1",children:Object(x.jsx)(O.a,{transitionDuration:300,children:this.state.postData.map((function(t,a){return Object(x.jsx)("div",{className:"mb-5",children:Object(x.jsx)(Q,{ownFeed:e.props.ownFeed,postData:t})},a)}))},"fadeIn"+this.state.refreshAnimation)})]}):Object(x.jsx)("h1",{children:"Not loaded"})})}}]),a}(m.a.Component),ee=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={switch:!1},s}return Object(c.a)(a,[{key:"switchFeed",value:function(){this.setState((function(e){return{switch:!e.switch}}))}},{key:"render",value:function(){var e=this,t=this.state.switch?Object(x.jsx)(X,{ownFeed:!1},"Feed1"):Object(x.jsx)(X,{ownFeed:!0},"Feed2");return Object(x.jsxs)("div",{className:"pr-2 pl-5 pt-3 pb-1",children:[Object(x.jsxs)("div",{className:"columns is-centered mt-3",children:[Object(x.jsx)("div",{className:"column is-half has-text-right p-0 mr-2",children:Object(x.jsx)("label",{htmlFor:"feedSwitch",className:"is-size-5 is-unselectable",children:"Own Feed "})}),Object(x.jsx)("div",{className:"column is-narrow has-text-centered p-0",children:Object(x.jsxs)("div",{className:"field",children:[Object(x.jsx)("input",{id:"feedSwitch",type:"checkbox",className:"switch is-medium is-rounded is-success",onChange:function(){return e.switchFeed()}}),Object(x.jsx)("label",{htmlFor:"feedSwitch",className:"is-unselectable has-text-centered feedSwitch"})]})}),Object(x.jsx)("div",{className:"column is-half has-text-left p-0 ml-2",children:Object(x.jsx)("label",{htmlFor:"feedSwitch",className:"is-size-5 is-unselectable",children:"Friends Feed"})})]}),t]})}}]),a}(m.a.Component),te=a(105),ae=a(55),se=a(99),ne=a(100),ie=a(101),re=a.n(ie),ce={active:!1,title:"",startDate:new Date,endDate:new Date,activityEvents:[],date:new Date,notifyMessage:"",notifyType:""},oe=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).abortController=void 0,s.calendar=void 0,s.action=function(){var e=!s.state.active;e?s.setState((function(){return{active:e}})):s.setState(ce)},s.state=ce,s.abortController=new AbortController,s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.initCalendar(),this.getEvents()}},{key:"componentWillUnmount",value:function(){this.abortController.abort()}},{key:"initCalendar",value:function(){var e=this;"undefined"!==typeof this.calendar&&this.calendar.destroy();var t=document.getElementById("calendarFull");this.calendar=new te.a(t,{initialView:"dayGridMonth",firstDay:1,dayMaxEvents:2,timeZone:"local",headerToolbar:{left:"prev,next",center:"title",right:"today"},eventTimeFormat:{hour:"2-digit",minute:"2-digit",hour12:!1},slotLabelFormat:{hour:"2-digit",minute:"2-digit",hour12:!1},defaultAllDay:!0,plugins:[ae.b,se.a,ne.a],contentHeight:"auto",selectable:!0,select:function(t){return e.create(t)},eventDidMount:function(t){var a=document.createElement("button");a.onclick=function(){return e.removeEvent(t)},a.className="delete",t.el.append(a)}}),this.calendar.render()}},{key:"create",value:function(e){this.setState({startDate:e.startStr,endDate:e.endStr}),this.action()}},{key:"createEvent",value:function(){if(this.state.title&&""!==this.state.title){var e={title:this.state.title,start:this.state.startDate,end:this.state.endDate};this.setEvents(e)}else this.setState({notifyMessage:"Title can not be empty",notifyType:"is-danger"})}},{key:"getActivity",value:function(){var e=this;fetch(Re+"activity/get",{method:"GET",headers:{Accept:"application/json",Authorization:g.getAuthToken()},signal:this.abortController.signal}).then((function(t){if(t.ok){var a=[];return t.json().then((function(t){var s;JSON.parse(t.body).map((function(e){var t=re()(e.startedAt).add(e.duration,"seconds").format("YYYY-MM-DD HH:mm:ss"),s={id:e.activity_id,title:e.title,start:e.startedAt,end:t,groupId:"activityEvents",color:"green"};return a.push(s),s})),null===(s=e.calendar)||void 0===s||s.addEventSource(a)}))}return t.json().then((function(t){console.error("Fetch has failed:",t),e.setState({activityEvents:[]})}))}))}},{key:"getEvents",value:function(){var e=this;fetch(Re+"events/get",{method:"GET",headers:{Accept:"application/json",Authorization:g.getAuthToken()},signal:this.abortController.signal}).then((function(t){return t.ok?t.json().then((function(t){var a,s;null===(a=e.calendar)||void 0===a||a.removeAllEventSources(),null===(s=e.calendar)||void 0===s||s.addEventSource(JSON.parse(t.body)),e.getActivity()})):t.json().then((function(e){console.error("Fetch has failed:",e)}))}))}},{key:"setEvents",value:function(e){var t=this;fetch(Re+"events/add",{method:"POST",headers:{accept:"application/json","Content-Type":"application/json",Authorization:g.getAuthToken()},body:JSON.stringify(e),signal:this.abortController.signal}).then((function(e){if(!e.ok)return e.json().then((function(e){console.error("Event could not be added to database. Please contact an administrator for more information. Error is: "+e)}));t.action(),t.getEvents()}))}},{key:"removeEvent",value:function(e){"activityEvents"===e.event.groupId?(e.event.remove(),fetch(Re+"activity/remove",{method:"DELETE",headers:{accept:"application/json","content-type":"application/json",Authorization:g.getAuthToken()},body:JSON.stringify({id:e.event.id}),signal:this.abortController.signal}).then((function(e){e.ok?g.setRefreshFeed(!0):console.error("Delete request has failed")}))):(e.event.remove(),fetch(Re+"events/remove",{method:"DELETE",headers:{accept:"application/json","content-type":"application/json",Authorization:g.getAuthToken()},body:JSON.stringify({id:e.event.id}),signal:this.abortController.signal}).then((function(e){e.ok||console.error("Delete request has failed")})))}},{key:"handleOnChange",value:function(e){var t=e.target,a=t.value,s=t.name;this.setState(Object(S.a)({},s,a))}},{key:"render",value:function(){var e=this,t=this.state.active?"is-active":"";return Object(x.jsxs)("div",{className:"box m-5",children:[Object(x.jsx)("div",{id:"calendarFull"}),Object(x.jsxs)("div",{className:"modal ".concat(t),id:"CalendarModal",children:[Object(x.jsx)("div",{className:"modal-background"}),Object(x.jsxs)("div",{className:"modal-card",children:[Object(x.jsxs)("header",{className:"modal-card-head",children:[Object(x.jsx)("p",{className:"modal-card-title",children:"Create Event"}),Object(x.jsx)("button",{className:"delete","aria-label":"close",onClick:function(){return e.action()}})]}),Object(x.jsx)("section",{className:"modal-card-body",children:Object(x.jsx)("div",{className:"content",children:Object(x.jsxs)("div",{className:"control",children:[Object(x.jsx)(C,{message:this.state.notifyMessage,type:this.state.notifyType,hasDelete:!1}),Object(x.jsx)("label",{className:"label",children:"Event Name"}),Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("input",{className:"input",id:"eventTitle",name:"title",type:"text",placeholder:"Event title",value:this.state.title,onChange:function(t){return e.handleOnChange(t)}})})]})})}),Object(x.jsxs)("footer",{className:"modal-card-foot",children:[Object(x.jsxs)("button",{className:"button is-success",onClick:function(){return e.createEvent()},children:[Object(x.jsx)(b.a,{icon:p.d}),Object(x.jsx)("span",{className:"m-2",children:"Save"})]}),Object(x.jsxs)("button",{className:"button is-danger",onClick:function(){return e.action()},children:[Object(x.jsx)(b.a,{icon:p.l}),Object(x.jsx)("span",{className:"m-2",children:"Cancel"})]})]})]})]})]})}}]),a}(m.a.Component),le=a(79),he=["silver","gold","red","blue","orange","coral","green","purple","orange","black","pink","navy"],de=["Jan.","Feb.","Mar.","Apr.","May.","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."],ue=["line","bar","radar","polarArea","doughnut","pie"],me=["distance","duration","altitudeDifference","averageHeartRate","pace"],je=["distance","duration","altitudeDifference"],be=["averageHeartRate","pace"],pe={active:!1,title:"",type:"line",category:"distance",sport:"",fill:!1,array:[],sports:[],switchfunc:!1,year:new Date,notifyMessage:"",notifyType:""},fe=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).abortController=void 0,s.charts=void 0,s.action=function(){var e=!s.state.active;e?(s.fetchSports(),s.setState((function(){return{active:e}}))):s.setState(pe)},s.state=pe,s.charts=[],s.abortController=new AbortController,s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getCharts(!0)}},{key:"componentWillUnmount",value:function(){this.abortController.abort()}},{key:"fetchSports",value:function(){var e=this;fetch(Re+"sports/fetch",{method:"GET",headers:{Accept:"application/json",Authorization:g.getAuthToken()},signal:this.abortController.signal}).then((function(t){return t.ok?t.json().then((function(t){var a=JSON.parse(t.body),s=[];for(var n in s.push(""),a)a.hasOwnProperty(n)&&s.push(n);e.setState({sports:s})})):t.json().then((function(t){console.error("Sport Fetch failed:",t),e.setState({sports:[]})}))}))}},{key:"getCharts",value:function(e){var t=this;fetch(Re+"charts/get",{method:"GET",headers:{Accept:"application/json",Authorization:g.getAuthToken()},signal:this.abortController.signal}).then((function(a){return a.ok?a.json().then((function(a){t.setState({array:JSON.parse(a.body)},(function(){e&&t.loopOverData()}))})):a.json().then((function(e){console.error("Failed to get charts: ",e)}))}))}},{key:"loopOverData",value:function(){for(var e=0;e<this.state.array.length;e++){var t={name:this.state.array[e].name,type:this.state.array[e].type,category:this.state.array[e].category,fill:this.state.array[e].fill,param_sport:this.state.array[e].param_sport,year:this.state.array[e].year,sqlfunc:this.state.array[e].sqlfunc};this.createRequest(t)}}},{key:"createRequest",value:function(e){var t,a,s,n,i=new URLSearchParams;e.category&&(s=e.category,i.append("category",s)),e.sqlfunc&&(n=e.sqlfunc,i.append("sqlfunc",n)),e.param_sport&&(a=e.param_sport,i.append("sport",a)),e.year&&(t=e.year,i.append("year",t));var r=Re+"charts/dataset?";this.getDatasets(r,i,e)}},{key:"getDatasets",value:function(e,t,a){var s=this;fetch(e+t,{method:"GET",headers:{Accept:"application/json",Authorization:g.getAuthToken()},signal:this.abortController.signal}).then((function(e){return e.ok?e.json().then((function(e){var t=JSON.parse(e.body);s.addElement(a,t)})):e.json().then((function(e){console.error("Fetch has failed:",e)}))}))}},{key:"addElement",value:function(e,t){var a=this,s=document.getElementById(e.name),n=document.getElementById("chart_ID"+e.name),i=document.getElementById("chartBox_ID"+e.name);if(n||s||i)console.error("Element could not be added");else{var r=document.createElement("div");r.className="box",r.style.maxHeight="600px",r.id="chartBoxID_"+e.name;var c=document.createElement("canvas");c.id="chartID_"+e.name,c.style.maxHeight="85%",c.style.width="100%";var o=document.createElement("button");o.id=e.name,o.className="button is-danger m-1",o.innerHTML="Delete "+c.id,o.onclick=function(e){return a.removeChart(e.target.id)};var l=document.getElementById("charts");null===l||void 0===l||l.appendChild(r),null===r||void 0===r||r.append(c),null===r||void 0===r||r.appendChild(o),this.addCharts(c,e,t)}}},{key:"addCharts",value:function(e,t,a){var s=!0;"pie"!==t.type&&"doughnut"!==t.type&&"polarArea"!==t.type&&"radar"!==t.type||(s=!1),t.fill=1===t.fill;var n=new Array(de.length),i=this.yLab(t.category),r=this.subtitle(t.category,i,t.year,t.param_sport);n.fill(0,0,de.length);for(var c=function(e){de.forEach((function(t,s){a[e].month===s&&a[e].amount&&n.splice(s-1,1,a[e].amount)}))},o=0;o<a.length;o++)c(o);new le.a(e,{options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{display:s,title:{text:"Month",display:s}},y:{display:s,title:{display:s,text:[i]}}},plugins:{title:{display:!0,color:"#808080",text:[t.name,r],font:{size:20}}}},height:"auto",type:t.type,data:{labels:de,datasets:[{label:t.name,backgroundColor:he,data:n,fill:t.fill}]}})}},{key:"configureChart",value:function(){var e=this;if(this.state.title&&this.state.type&&this.state.year&&this.state.category)if(this.getCharts(!1),this.state.array.find((function(t){return t.name===e.state.title})))this.setState({notifyMessage:"Title was already given. Please choose an other title for your chart",notifyType:"is-danger"});else{var t;t=this.state.switchfunc?"sum":"avg";var a=this.state.year.getFullYear(),s={name:this.state.title,type:this.state.type,category:this.state.category,fill:this.state.fill,param_sport:this.state.sport,year:a,sqlfunc:t};this.createRequest(s),this.setCharts(s),this.action()}else this.setState({notifyMessage:"Configuration values are missing",notifyType:"is-danger"})}},{key:"setCharts",value:function(e){var t=this;fetch(Re+"charts/add",{method:"POST",headers:{accept:"application/json","content-type":"application/json",Authorization:g.getAuthToken()},body:JSON.stringify(e),signal:this.abortController.signal}).then((function(e){if(!e.ok)return e.json().then((function(e){t.setState({notifyMessage:"Event could not be added to database. Please contact an administrator for more information. Error is: "+e,notifyType:"is-danger"})}))}))}},{key:"removeChart",value:function(e){var t="chartID_"+e,a=le.a.getChart(t);a&&(a.destroy(),this.removeElement(e),fetch(Re+"charts/remove",{method:"DELETE",headers:{accept:"application/json","content-type":"application/json",Authorization:g.getAuthToken()},body:JSON.stringify({chartId:e}),signal:this.abortController.signal}).then((function(e){e.ok?g.setRefreshFeed(!0):console.error("Delete request has failed")})))}},{key:"removeElement",value:function(e){var t=document.getElementById("chartID_"+e),a=document.getElementById(e),s=document.getElementById("chartBoxID_"+e);t.parentNode&&a.parentNode&&s.parentNode&&(t.parentNode.removeChild(t),a.parentNode.removeChild(a),s.parentNode.removeChild(s))}},{key:"yLab",value:function(e){var t="";if(me.includes(e))switch(e){case"distance":case"altitudeDifference":t="meter";break;case"duration":t="seconds";break;case"pace":t="km/h";break;case"effort":t="calories";break;case"averageHeartRate":t="BPM"}return t}},{key:"subtitle",value:function(e,t,a,s){var n;return n=s&&""!==s?"".concat(e," in ").concat(t," per month for ").concat(a," and for ").concat(s):"".concat(e," in ").concat(t," per month for ").concat(a," and for all sports"),n}},{key:"fill",value:function(){var e=this;return"line"===this.state.type||"radar"===this.state.type?Object(x.jsxs)("div",{className:"m-2",children:[Object(x.jsx)("input",{type:"checkbox",name:"fill",className:"switch",id:"fill",onChange:function(t){return e.handleOnCheck(t)}}),Object(x.jsx)("label",{className:"label",htmlFor:"fill",children:this.state.fill?Object(x.jsx)("span",{children:"Filled"}):Object(x.jsx)("span",{children:"Not filled"})})]}):""}},{key:"renderOptions",value:function(e){return e&&e.length>0&&e.map((function(e){return Object(x.jsx)("option",{children:e},e)}))}},{key:"handleDateOnChange",value:function(e){this.setState({year:e})}},{key:"handleOnChange",value:function(e){var t=e.target,a=t.value,s=t.name;this.setState(Object(S.a)({},s,a))}},{key:"handleOnCheck",value:function(e){var t=e.target,a=t.name,s=t.checked;this.setState(Object(S.a)({},a,s))}},{key:"handleCategories",value:function(){var e=je;return this.state.switchfunc||(e=e.concat(be)),this.renderOptions(e)}},{key:"render",value:function(){var e=this,t=this.state.active?"is-active":"";return Object(x.jsxs)("div",{className:"container",children:[Object(x.jsx)("div",{className:"divider",children:"Charts"}),Object(x.jsx)("div",{className:"controls",children:Object(x.jsx)("button",{className:"button is-primary",onClick:function(){return e.action()},children:"Add Chart"})}),Object(x.jsx)("div",{id:"charts",className:"p-5"}),Object(x.jsxs)("div",{className:"modal ".concat(t),id:"ChartModal",children:[Object(x.jsx)("div",{className:"modal-background"}),Object(x.jsxs)("div",{className:"modal-card",children:[Object(x.jsxs)("header",{className:"modal-card-head",children:[Object(x.jsx)("p",{className:"modal-card-title",children:"Chart Modal"}),Object(x.jsx)("button",{className:"delete","aria-label":"close",onClick:function(){return e.action()}})]}),Object(x.jsx)("section",{className:"modal-card-body",children:Object(x.jsx)("div",{className:"content",children:Object(x.jsxs)("div",{className:"control",children:[Object(x.jsx)(C,{message:this.state.notifyMessage,type:this.state.notifyType,hasDelete:!1}),Object(x.jsx)("label",{className:"label",children:"Chart Name"}),Object(x.jsx)("input",{className:"input",id:"chartTitle",name:"title",type:"text",placeholder:"Chart title",value:this.state.title,onChange:function(t){return e.handleOnChange(t)}}),Object(x.jsx)("label",{className:"label",children:"Chart Type"}),Object(x.jsx)("div",{className:"select is-fullwidth mb-5",children:Object(x.jsx)("select",{className:"type",name:"type",id:"type",onChange:function(t){return e.handleOnChange(t)},children:this.renderOptions(ue)})}),Object(x.jsxs)("div",{className:"columns is-centered",children:[Object(x.jsx)("div",{className:"column is-one-quarter",children:Object(x.jsx)("label",{className:"label",children:"Chart function"})}),Object(x.jsx)("div",{className:"column is-one-quarter",children:Object(x.jsxs)("div",{className:"field",children:[Object(x.jsx)("input",{type:"checkbox",name:"switchfunc",className:"switch",id:"switchfunc",onChange:function(t){return e.handleOnCheck(t)}}),Object(x.jsx)("label",{className:"label",htmlFor:"switchfunc",children:this.state.switchfunc?Object(x.jsx)("span",{children:"Sum"}):Object(x.jsx)("span",{children:"Average"})})]})})]}),Object(x.jsx)("label",{className:"label",children:"Filter for category"}),Object(x.jsx)("div",{className:"select is-fullwidth",children:Object(x.jsx)("select",{className:"select is-fullwidth mb-5",name:"category",id:"category",onChange:function(t){return e.handleOnChange(t)},children:this.handleCategories()})}),Object(x.jsx)("div",{className:"is-divider","data-content":"Optional"}),Object(x.jsx)("label",{className:"label",children:"Filter for sport"}),Object(x.jsx)("div",{className:"select is-fullwidth mb-5",children:Object(x.jsx)("select",{className:"sport",name:"sport",id:"sport",onChange:function(t){return e.handleOnChange(t)},children:this.renderOptions(this.state.sports)})}),Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{className:"label",children:"Select year"}),Object(x.jsx)(T.a,{dateFormat:"yyyy",showYearPicker:!0,selected:this.state.year,locale:D.a,onChange:function(t){return e.handleDateOnChange(t)},minDate:new Date("01-01-1900"),maxDate:new Date,inline:!0})]}),Object(x.jsx)("div",{children:this.fill()})]})})}),Object(x.jsxs)("footer",{className:"modal-card-foot",children:[Object(x.jsxs)("button",{className:"button is-success",onClick:function(){return e.configureChart()},children:[Object(x.jsx)(b.a,{icon:p.d}),Object(x.jsx)("span",{className:"m-2",children:"Save"})]}),Object(x.jsxs)("button",{className:"button is-danger",onClick:function(){return e.action()},children:[Object(x.jsx)(b.a,{icon:p.l}),Object(x.jsx)("span",{className:"m-2",children:"Cancel"})]})]})]})]})]})}}]),a}(m.a.Component),ve=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={},s}return Object(c.a)(a,[{key:"render",value:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(J,{}),Object(x.jsxs)("div",{id:"body-content",className:"flexColumns has-background-grey-dark",children:[Object(x.jsx)("div",{className:"mainColumn hasScrollbar",id:"col-1",children:Object(x.jsx)(ee,{})}),Object(x.jsx)("div",{className:"is-divider-vertical px-2 m-0"}),Object(x.jsxs)("div",{className:"mainColumn hasScrollbar",id:"col-2",children:[Object(x.jsx)(oe,{}),Object(x.jsx)(fe,{})]})]}),Object(x.jsx)(H,{})]})}}]),a}(m.a.Component),Oe=a(29),ge=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={email:"",password:"",errorMessage:""},s.handleChange=s.handleChange.bind(Object(j.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(j.a)(s)),s}return Object(c.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.value,s=t.name;this.setState(Object(S.a)({},s,a))}},{key:"handleSubmit",value:function(e){var t=this,a=this.state.email,s=this.state.password;e.preventDefault(),""!==a&&""!==s?fetch(Re+"login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({emailOrUsername:a,password:s})}).then((function(e){200===e.status?e.json().then((function(e){if(e.token){sessionStorage.setItem("AccessToken",e.token);var a=e.token.split("."),s=JSON.parse(atob(a[1]));sessionStorage.setItem("username",s.username),window.location.href=Be}else t.setState({errorMessage:"Login Error Occured"})})):401===e.status?t.setState({errorMessage:"You have entered an invalid username or password"}):t.setState({errorMessage:"Error!"})})):this.setState({errorMessage:"Please enter an email and a password!"})}},{key:"render",value:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Oe.a,{children:Object(x.jsxs)("title",{children:[_e," | Login"]})}),Object(x.jsx)("section",{className:"section",children:Object(x.jsx)("div",{className:"columns is-centered",children:Object(x.jsx)("div",{className:"column is-5-tablet is-4-desktop is-3-widescreen",children:Object(x.jsxs)("form",{className:"box ",children:[Object(x.jsx)("h3",{className:"title",children:"Log in"}),Object(x.jsxs)("div",{className:"field",children:[Object(x.jsx)("label",{className:"label",children:"Email or username"}),Object(x.jsx)("div",{className:"control",children:Object(x.jsx)("input",{type:"email",autoFocus:!0,name:"email",className:"input",autoComplete:"username",placeholder:"Enter email",value:this.state.email,onChange:this.handleChange})})]}),Object(x.jsxs)("div",{className:"field",children:[Object(x.jsx)("label",{className:"label",children:"Password"}),Object(x.jsx)("div",{className:"control",children:Object(x.jsx)("input",{type:"password",name:"password",className:"input",autoComplete:"current-password",placeholder:"Enter password",value:this.state.password,onChange:this.handleChange})})]}),Object(x.jsx)(C,{message:this.state.errorMessage,type:"is-danger",hasDelete:!1}),Object(x.jsx)("button",{className:"button is-primary",onClick:this.handleSubmit,children:"Sign in"}),Object(x.jsx)("br",{})]})})})})]})}}]),a}(u.Component),xe=function(){function e(){Object(r.a)(this,e)}return Object(c.a)(e,null,[{key:"validateEmail",value:function(e){return/^[^@]+@\w+(\.\w+)+\w$/.test(e)}},{key:"validatePassword",value:function(e){return/^(?=.*\d)(?=.*[!@#$%^&_*-])(?=.*[a-z])(?=.*[A-Z]).{8,}$/.test(e)}},{key:"validateUsername",value:function(e){return/^([\w_-]{1,20})$/.test(e)}},{key:"validateName",value:function(e){return/^([A-Za-z-\xe4\xf6\xfc]{1,30})$/.test(e)}}]),e}(),ye=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={firstname:"",lastname:"",email:"",password1:"",password2:"",username:"",weight:0,date:new Date,dateChange:!1,errorMessage:"",errorType:"is-danger"},s.handleChange=s.handleChange.bind(Object(j.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(j.a)(s)),s.handleDateChange=s.handleDateChange.bind(Object(j.a)(s)),s}return Object(c.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a=t.value,s=t.name;this.setState(Object(S.a)({},s,a))}},{key:"handleDateChange",value:function(e){this.setState({date:e,dateChange:!0})}},{key:"handleSubmit",value:function(e){var t=this,a=this.state.email,s=this.state.password1,n=this.state.password2,i=this.state.firstname,r=this.state.lastname,c=this.state.username,o=this.state.weight;if(e.preventDefault(),""!==a&&""!==s&&""!==n&&""!==i&&""!==r&&""!==c&&0!==o&&this.state.dateChange)if(xe.validateName(i)&&xe.validateName(r))if(xe.validateUsername(c))if(xe.validateEmail(a))if(o>=10&&o<=400)if(s===n)if(xe.validatePassword(s)){var l=this.state.date.toISOString().slice(0,10);fetch(Re+"signup",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({firstname:i,lastname:r,email:a,password:s,username:c,date:l,weight:o})}).then((function(e){e.ok?201===e.status?(t.setNotification("The user was created!",!1),window.location.href=Be+"successful-signup"):t.setNotification("The given username or email already exists!"):t.setNotification("A server error occurred!")}))}else this.setNotification("Your password must have at least 8 letters, a symbol, an upper case letter and a number");else this.setNotification("The passwords must be equal!");else this.setNotification("Please enter a real weight!");else this.setNotification("Please enter a correct email!");else this.setNotification("The username must have max. 20 alphanumeric characters or ( - , _ )");else this.setNotification("The firstname/lastname must have 30 alphanumeric characters or less");else this.setNotification("Please fill out every field!")}},{key:"setNotification",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setState({errorMessage:e,errorType:t?"is-danger":"is-success"})}},{key:"render",value:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Oe.a,{children:Object(x.jsxs)("title",{children:[_e," | Sign-Up"]})}),Object(x.jsx)("section",{className:"section",children:Object(x.jsx)("div",{className:"columns is-centered",children:Object(x.jsx)("div",{className:"column is-5-tablet is-4-desktop is-3-widescreen",children:Object(x.jsxs)("form",{className:"box",children:[Object(x.jsx)("h3",{className:"title",children:"Register"}),Object(x.jsxs)("div",{className:"field is-horizontal",children:[Object(x.jsx)("div",{className:"field-label is-normal",children:Object(x.jsx)("label",{className:"label",children:"Name"})}),Object(x.jsxs)("div",{className:"field-body",children:[Object(x.jsx)("div",{className:"field",children:Object(x.jsx)("input",{autoFocus:!0,name:"firstname",type:"text",className:"input",placeholder:"First name",value:this.state.firstname,onChange:this.handleChange})}),Object(x.jsx)("div",{className:"field",children:Object(x.jsx)("input",{name:"lastname",type:"text",className:"input",placeholder:"Last name",value:this.state.lastname,onChange:this.handleChange})})]})]}),Object(x.jsxs)("div",{className:"field is-horizontal",children:[Object(x.jsx)("div",{className:"field-label is-normal",children:Object(x.jsx)("label",{className:"label",children:"Username"})}),Object(x.jsx)("div",{className:"field-body",children:Object(x.jsx)("div",{className:"field",children:Object(x.jsx)("input",{name:"username",type:"text",className:"input",autoComplete:"username",placeholder:"Enter username",value:this.state.username,onChange:this.handleChange})})})]}),Object(x.jsxs)("div",{className:"field is-horizontal",children:[Object(x.jsx)("div",{className:"field-label is-normal",children:Object(x.jsx)("label",{className:"label",children:"Email"})}),Object(x.jsx)("div",{className:"field-body",children:Object(x.jsx)("div",{className:"field",children:Object(x.jsx)("input",{name:"email",type:"email",className:"input has-icons-left",placeholder:"Enter email",value:this.state.email,onChange:this.handleChange})})})]}),Object(x.jsx)("hr",{}),Object(x.jsxs)("div",{className:"field is-horizontal",children:[Object(x.jsx)("div",{className:"field-label is-normal",children:Object(x.jsx)("label",{className:"label",children:"Date of Birth"})}),Object(x.jsx)("div",{className:"field-body",children:Object(x.jsx)("div",{className:"field",children:Object(x.jsx)(T.a,{selected:this.state.date,onChange:this.handleDateChange,dateFormat:"dd.MM.yyyy"})})})]}),Object(x.jsxs)("div",{className:"field is-horizontal",children:[Object(x.jsx)("div",{className:"field-label is-normal",children:Object(x.jsx)("label",{className:"label",children:"Weigth (kg)"})}),Object(x.jsx)("div",{className:"field-body",children:Object(x.jsx)("div",{className:"field",children:Object(x.jsx)("input",{name:"weight",type:"number",className:"input",placeholder:"Enter weight",min:"10",max:"200",value:this.state.weight,onChange:this.handleChange})})})]}),Object(x.jsx)("hr",{}),Object(x.jsxs)("div",{className:"field is-horizontal",children:[Object(x.jsx)("div",{className:"field-label is-normal",children:Object(x.jsx)("label",{className:"label",children:"Password"})}),Object(x.jsxs)("div",{className:"field-body",children:[Object(x.jsx)("div",{className:"field",children:Object(x.jsx)("input",{name:"password1",type:"password",className:"input",autoComplete:"new-password",placeholder:"Enter password",value:this.state.password1,onChange:this.handleChange})}),Object(x.jsx)("div",{className:"field",children:Object(x.jsx)("input",{name:"password2",type:"password",className:"input",autoComplete:"new-password",placeholder:"Confirm password",value:this.state.password2,onChange:this.handleChange})})]})]}),Object(x.jsx)("br",{}),Object(x.jsx)(C,{message:this.state.errorMessage,type:this.state.errorType,hasDelete:!1}),Object(x.jsx)("button",{className:"button is-primary",onClick:this.handleSubmit,children:"Register"})]})})})})]})}}]),a}(u.Component),Ne=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={},s}return Object(c.a)(a,[{key:"render",value:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(J,{}),Object(x.jsx)("div",{className:"hero is-fullheight-with-navbar has-background-grey-dark",children:Object(x.jsxs)(d.d,{children:[Object(x.jsx)(d.b,{exact:!0,path:"/",component:ge}),Object(x.jsx)(d.b,{path:"/login",component:ge}),Object(x.jsx)(d.b,{path:"/sign-up",component:ye})]})})]})}}]),a}(m.a.Component),Ce=a(30),ke=a(106);function we(e){var t=e.AuthenticationFunction,a=e.redirectPath,s=Object(ke.a)(e,["AuthenticationFunction","redirectPath"]);return t()?Object(x.jsx)(d.b,Object(Ce.a)({},s)):(delete s.component,Object(x.jsx)(d.b,Object(Ce.a)(Object(Ce.a)({},s),{},{children:Object(x.jsx)(d.a,{to:a})})))}var Se=a(78),Ae=a.n(Se),Te=a(104),De=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).state={progress:0},s}return Object(c.a)(a,[{key:"Sleep",value:function(e){return new Promise((function(t){return setTimeout(t,e)}))}},{key:"componentDidMount",value:function(){var e=Object(Te.a)(Ae.a.mark((function e(){var t;return Ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<101)){e.next=8;break}return e.next=4,this.Sleep(20);case 4:this.setState({progress:t});case 5:t++,e.next=1;break;case 8:window.location.href=Be+"login";case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(x.jsx)("div",{className:"hero is-fullheight has-background-grey-dark",children:Object(x.jsx)("section",{className:"section",children:Object(x.jsx)("div",{className:"columns is-centered",children:Object(x.jsxs)("div",{className:"column is-5-tablet is-4-desktop is-3-widescreen",children:[Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsxs)("form",{className:"box ",children:[Object(x.jsx)("p",{children:"Your Email was successfully verified!"}),Object(x.jsx)("p",{children:"You can login now!"}),Object(x.jsx)("br",{}),Object(x.jsx)("progress",{className:"progress is-success",value:this.state.progress,max:"100",children:"60%"})]})]})})})})}}]),a}(m.a.Component),Fe=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(x.jsx)("div",{className:"hero is-fullheight has-background-grey-dark",children:Object(x.jsx)("section",{className:"section",children:Object(x.jsx)("div",{className:"columns is-centered",children:Object(x.jsxs)("div",{className:"column is-5-tablet is-4-desktop is-3-widescreen",children:[Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsx)("br",{}),Object(x.jsxs)("form",{className:"box ",children:[Object(x.jsx)("p",{children:"Your Registration is almost complete!"}),Object(x.jsx)("br",{}),Object(x.jsx)("p",{children:"We\xb4ve send you an email to confirm your account!"}),Object(x.jsx)("br",{})]})]})})})})}}]),a}(m.a.Component),Ie=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).thumbsRefreshInterval=void 0,s.abortController=void 0,s.state={showThumbsUp:!1,thumbsUpCounter:0},s.abortController=new AbortController,s}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){clearInterval(this.thumbsRefreshInterval),this.abortController.abort()}},{key:"render",value:function(){var e=this.props.postData,t="/"+e.sport+".png";return Object(x.jsx)("div",{className:"card",children:Object(x.jsxs)("div",{className:"card-content",children:[Object(x.jsxs)("div",{className:"media",children:[Object(x.jsx)("figure",{className:"image is-32x32",children:Object(x.jsx)("img",{src:t,alt:"product"})}),Object(x.jsxs)("div",{className:"media-content has-text-left\tpl-2",children:[Object(x.jsx)("p",{className:"title is-4",children:e.sport}),Object(x.jsx)("p",{className:"subtitle is-6",children:Object(x.jsx)("time",{children:Y.formatDateTime(new Date(Date.parse(String(e.addedAt))))})})]})]}),Object(x.jsx)("div",{className:"content ",children:Object(x.jsx)($,{activityData:e.activityData})})]})})}}]),a}(m.a.Component),Ee=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).abortController=void 0,s.state={postData:[]},s.abortController=new AbortController,s.getLastActivities=s.getLastActivities.bind(Object(j.a)(s)),s}return Object(c.a)(a,[{key:"componentDidMount",value:function(){this.getLastActivities(2)}},{key:"componentDidUpdate",value:function(e,t,a){e.username!==this.props.username&&this.getLastActivities(2)}},{key:"getLastActivities",value:function(e){var t=this,a=Re+"feed/own?offset=0&user="+this.props.username;fetch(a,{method:"GET",headers:{Accepts:"application/json",Authorization:g.getAuthToken()},signal:this.abortController.signal}).then((function(a){if(a.ok)return a.json().then((function(a){var s=a.activities;t.setState({postData:s.slice(0,e)})}))})).catch((function(e){"AbortError"!==e.name&&console.log("Fetch failed:",e)}))}},{key:"componentWillUnmount",value:function(){this.abortController.abort()}},{key:"render",value:function(){var e=this,t=this.state.postData;return Object(x.jsx)(x.Fragment,{children:t.length>0?t.map((function(t,a){return Object(x.jsx)("div",{className:"mb-5",children:Object(x.jsx)(Ie,{postData:t})},"user_feed_"+e.props.username+a)})):Object(x.jsxs)("p",{className:"tag is-primary is-medium",children:[this.props.username," has no activities!"]})})}}]),a}(m.a.Component),Me=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).abortController=void 0,s.state={username:g.getUsername(),firstname:"",lastname:"",date:new Date,dateChange:!1,weight:"",email:"",firstnamePlaceholder:"Add your firstname",lastnamePlaceholder:"Add your lastname",weightPlaceholder:"Add your weight",emailPlaceholder:"Add your email",notifyMessage:"",notifyType:"is-danger"},s.abortController=new AbortController,s.getDefaultValues(),s.handleDateChange=s.handleDateChange.bind(Object(j.a)(s)),s.handleChange=s.handleChange.bind(Object(j.a)(s)),s.handleSubmit=s.handleSubmit.bind(Object(j.a)(s)),s}return Object(c.a)(a,[{key:"componentWillUnmount",value:function(){this.abortController.abort()}},{key:"getDefaultValues",value:function(){var e=this;fetch(Re+"users/get/"+this.state.username,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:g.getAuthToken()},signal:this.abortController.signal}).then((function(t){t.ok?t.json().then((function(t){e.setState({firstname:t[0].firstname?"":e.state.firstname,firstnamePlaceholder:t[0].firstname?t[0].firstname:e.state.firstnamePlaceholder,lastname:t[0].lastname?"":e.state.lastname,lastnamePlaceholder:t[0].lastname?t[0].lastname:e.state.lastnamePlaceholder,date:t[0].date?new Date(t[0].date):e.state.date,weight:t[0].weight?"":e.state.weight,weightPlaceholder:t[0].weight?t[0].weight:e.state.weightPlaceholder,email:t[0].email?"":e.state.email,emailPlaceholder:t[0].email?t[0].email:e.state.emailPlaceholder})})):console.log("Looks like there was a problem. Status Code: ",t.status)})).catch((function(e){"AbortError"!==e.name&&console.log("Fetch failed:",e)}))}},{key:"handleChange",value:function(e){var t=e.target,a=t.value,s=t.name;this.setState(Object(S.a)({},s,a))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a="";this.state.dateChange&&(this.setState({dateChange:!1}),a=new Date(this.state.date.getTime()+864e5).toISOString().slice(0,10));if(xe.validateName(this.state.firstname)||xe.validateName(this.state.firstnamePlaceholder)&&""===this.state.firstname)if(xe.validateName(this.state.lastname)||xe.validateName(this.state.lastnamePlaceholder)&&""===this.state.lastname)if(this.state.weight>=10&&this.state.weight<=400||Number(this.state.weightPlaceholder)>=10&&Number(this.state.weightPlaceholder)<=400)if(xe.validateEmail(this.state.email)||xe.validateEmail(this.state.emailPlaceholder)&&""===this.state.email){var s=this.state.email?" Please verify your new email before the next login":"";fetch(Re+"users/update",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:g.getAuthToken()},body:JSON.stringify({firstname:this.state.firstname,lastname:this.state.lastname,date:a,weight:this.state.weight,email:this.state.email}),signal:this.abortController.signal}).then((function(e){t.getDefaultValues(),t.setNotification(e.ok?"Your Changes have been saved!"+s:"Something went wrong while saving your changes",!e.ok)})).catch((function(e){"AbortError"!==e.name&&console.log("Fetch failed:",e)}))}else this.setNotification("Please enter a valid email");else this.setNotification("Please enter a valid weight");else this.setNotification("Please enter a valid lastname (30 characters)");else this.setNotification("Please enter a valid firstname (30 characters)")}},{key:"setNotification",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setState({notifyMessage:e,notifyType:t?"is-danger":"is-success"})}},{key:"handleDateChange",value:function(e){this.setState({date:e,dateChange:!0})}},{key:"render",value:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Oe.a,{children:Object(x.jsxs)("title",{children:[_e," | Profile"]})}),Object(x.jsx)(J,{}),Object(x.jsx)("div",{id:"body-content",className:"has-background-grey-dark hasScrollbar",children:Object(x.jsx)("div",{className:"container mt-5",children:Object(x.jsxs)("form",{className:"box",children:[Object(x.jsxs)("p",{className:"is-size-4",children:["Hello ",this.state.username,",",Object(x.jsx)("br",{})," here you can change your account values"]}),Object(x.jsxs)("div",{className:"field",children:[Object(x.jsx)("label",{className:"label",children:"Firstname"}),Object(x.jsx)("input",{className:"input",name:"firstname",type:"text",maxLength:30,placeholder:this.state.firstnamePlaceholder,value:this.state.firstname,onChange:this.handleChange})]}),Object(x.jsxs)("div",{className:"field",children:[Object(x.jsx)("label",{className:"label",children:"Lastname"}),Object(x.jsx)("input",{className:"input",name:"lastname",type:"text",maxLength:30,placeholder:this.state.lastnamePlaceholder,value:this.state.lastname,onChange:this.handleChange})]}),Object(x.jsxs)("div",{className:"field",children:[Object(x.jsx)("label",{className:"label",children:"Date of Birth"}),Object(x.jsx)(T.a,{maxDate:new Date,selected:this.state.date,showMonthDropdown:!0,showYearDropdown:!0,onChange:this.handleDateChange,dateFormat:"dd.MM.yyyy"})]}),Object(x.jsxs)("div",{className:"field",children:[Object(x.jsx)("label",{className:"label",children:"Weight"}),Object(x.jsx)("input",{className:"input",name:"weight",type:"number",min:"0",max:"300",placeholder:this.state.weightPlaceholder,value:this.state.weight,onChange:this.handleChange})]}),Object(x.jsxs)("div",{className:"field",children:[Object(x.jsx)("label",{className:"label",children:"e-mail"}),Object(x.jsx)("input",{className:"input",name:"email",type:"email",maxLength:50,placeholder:this.state.emailPlaceholder,value:this.state.email,onChange:this.handleChange})]}),Object(x.jsx)("br",{}),Object(x.jsx)(C,{message:this.state.notifyMessage,type:this.state.notifyType,hasDelete:!1}),Object(x.jsx)("button",{className:"button is-black is-outlined",type:"submit",onClick:this.handleSubmit,children:"Change Data"})]})})}),Object(x.jsx)(H,{})]})}}]),a}(m.a.Component),Pe=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var s;return Object(r.a)(this,a),(s=t.call(this,e)).abortController=void 0,s.state={username:e.match.params.username,firstname:"",lastname:"",date:new Date,dateChange:!1,weight:"",email:"",relationship:{},postData:[]},s.abortController=new AbortController,s.getUserInformation(),s.handleBlockClick=s.handleBlockClick.bind(Object(j.a)(s)),s.handleFollowClick=s.handleFollowClick.bind(Object(j.a)(s)),s}return Object(c.a)(a,[{key:"componentDidUpdate",value:function(e,t,a){var s=this,n=this.props.match.params.username;this.state.username!==n&&this.setState({username:n},(function(){return s.getUserInformation()}))}},{key:"componentWillUnmount",value:function(){this.abortController.abort()}},{key:"getUserInformation",value:function(){var e=this;fetch(Re+"users/get/"+this.state.username,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:g.getAuthToken()},signal:this.abortController.signal}).then((function(t){t.ok?t.json().then((function(t){e.setState({firstname:t[0].firstname,lastname:t[0].lastname,date:new Date(t[0].date),weight:t[0].weight,email:t[0].email},(function(){fetch(Re+"users/getRelationship?user="+e.state.username,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:g.getAuthToken()},signal:e.abortController.signal}).then((function(t){t.ok&&t.json().then((function(t){return e.setState({relationship:t})}))})).catch((function(e){"AbortError"!==e.name&&console.log(e)}))}))})):404===t.status?e.props.history.push({pathname:"/NotFound",state:{username:e.state.username}}):console.log("Looks like there was a problem. Status Code: ",t.status)})).catch((function(e){"AbortError"!==e.name&&console.log(e)}))}},{key:"handleBlockClick",value:function(e){var t=this,a=this.state.relationship.hasBlocked,s=a?{unblocked:this.state.username}:{toBeBlocked:this.state.username};fetch(Re+"users/"+(a?"un":"")+"block",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:g.getAuthToken()},body:JSON.stringify(s),signal:this.abortController.signal}).then((function(e){e.ok&&t.getUserInformation()})).catch((function(e){"AbortError"!==e.name&&console.log(e)}))}},{key:"handleFollowClick",value:function(e){var t=this;if(!this.state.relationship.isBlocked){var a=this.state.relationship.following,s=a?{unfollowed:this.state.username}:{followed:this.state.username};fetch(Re+"users/"+(a?"un":"")+"follow",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:g.getAuthToken()},body:JSON.stringify(s),signal:this.abortController.signal}).then((function(e){e.ok&&t.getUserInformation()})).catch((function(e){"AbortError"!==e.name&&console.log(e)}))}}},{key:"render",value:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Oe.a,{children:Object(x.jsxs)("title",{children:[_e," | ",this.state.username,"'s profile"]})}),Object(x.jsx)(J,{}),Object(x.jsx)("div",{id:"body-content",className:"has-background-grey-dark hasScrollbar",children:Object(x.jsxs)("div",{className:"container mt-5",children:[Object(x.jsx)("div",{className:"card is-medium",children:Object(x.jsxs)("div",{className:"card-content",children:[Object(x.jsxs)("div",{className:"media",children:[Object(x.jsx)("div",{className:"media-left",children:Object(x.jsx)("figure",{className:"image is-48x48",children:Object(x.jsx)("img",{src:"https://bulma.io/images/placeholders/96x96.png",alt:"Placeholder"})})}),Object(x.jsxs)("div",{className:"media-content",children:[Object(x.jsxs)("p",{className:"title is-4",children:[this.state.firstname," ",this.state.lastname]}),Object(x.jsxs)("p",{className:"subtitle is-6",children:["@",this.state.username]})]}),Object(x.jsx)("div",{className:"field has-addons is-flex-wrap-wrap is-justify-content-center",children:this.state.username!==g.getUsername()?Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("button",{className:"button is-success m-1",onClick:this.handleFollowClick,disabled:this.state.relationship.blocked,children:(this.state.relationship.following&&!this.state.relationship.blocked?"Unf":"F")+"ollow"}),Object(x.jsx)("button",{className:"button is-danger m-1",onClick:this.handleBlockClick,children:(this.state.relationship.hasBlocked?"Unb":"B")+"lock"})]}):Object(x.jsx)(x.Fragment,{})})]}),Object(x.jsx)("div",{className:"content",children:Object(x.jsxs)("table",{className:"table",children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("b",{children:"Date of Birth"})}),Object(x.jsx)("td",{children:Object(x.jsx)("b",{children:"Weight"})}),Object(x.jsx)("td",{children:Object(x.jsx)("b",{children:"E-Mail"})})]})}),Object(x.jsx)("tbody",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Y.formatDate(this.state.date)}),Object(x.jsxs)("td",{children:[this.state.weight," kg"]}),Object(x.jsx)("td",{children:this.state.email})]})})]})})]})}),Object(x.jsxs)("div",{className:"box mt-4",children:[Object(x.jsx)("div",{className:"divider",children:"Most Recent Activities"}),Object(x.jsx)(Ee,{username:this.state.username})]})]})}),Object(x.jsx)(H,{})]})}}]),a}(m.a.Component),Ue=function(e){var t="",a=e.location.state;a&&a.username&&(t=a.username);var s=0===t.length?"page":"user",n=0===t.length?e.location.pathname.substr(1):t;return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(J,{}),Object(x.jsx)("div",{id:"body-content",className:"has-background-grey-dark hasScrollbar",children:Object(x.jsx)("div",{className:"container",children:Object(x.jsxs)("div",{className:"box m-6",children:[Object(x.jsx)("h1",{className:"title is-1 has-text-danger",children:"404 - Not Found"}),Object(x.jsxs)("p",{className:"subtitle is-3",children:["/NotFound"!==e.location.pathname||t.length>0?Object(x.jsxs)(x.Fragment,{children:["The ",s,Object(x.jsxs)("span",{className:"subtitle is-3 is-family-code mx-2",children:["'",n,"'"]})]}):Object(x.jsx)(x.Fragment,{children:Object(x.jsx)("span",{children:"This page "})}),"doesn't exist!"]})]})})}),Object(x.jsx)(H,{})]})},Le=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"render",value:function(){return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(Oe.a,{children:Object(x.jsx)("title",{children:_e})}),Object(x.jsx)(h.a,{children:Object(x.jsxs)(d.d,{children:[Object(x.jsx)(d.b,{exact:!0,path:"/",component:g.isLoggedIn()?ve:Ne}),Object(x.jsx)(d.b,{exact:!0,path:"/dev",component:ve}),Object(x.jsx)(we,{exact:!0,path:"/login",component:Ne,AuthenticationFunction:g.isNotLoggedIn,redirectPath:"/"}),Object(x.jsx)(we,{exact:!0,path:"/sign-up",component:Ne,AuthenticationFunction:g.isNotLoggedIn,redirectPath:"/"}),Object(x.jsx)(we,{exact:!0,path:"/verify",component:De,AuthenticationFunction:g.isNotLoggedIn,redirectPath:"/"}),Object(x.jsx)(we,{exact:!0,path:"/successful-signup",component:Fe,AuthenticationFunction:g.isNotLoggedIn,redirectPath:"/"}),Object(x.jsx)(we,{exact:!0,path:"/profile",component:Me,AuthenticationFunction:g.isLoggedIn,redirectPath:"/"}),Object(x.jsx)(we,{exact:!0,path:"/users/:username",component:Pe,AuthenticationFunction:g.isLoggedIn,redirectPath:"/"}),Object(x.jsx)(we,{path:"/NotFound",component:Ue,AuthenticationFunction:g.isLoggedIn,redirectPath:"/"}),Object(x.jsx)(d.b,{component:Ue})]})})]})}}]),a}(u.Component),_e="Workout-Tracker",Re="https://workouttracker.server-welt.com:9000/backend/",Be="https://workouttracker.server-welt.com/";i.a.render(Object(x.jsx)(Le,{}),document.getElementById("root"))},93:function(e,t,a){}},[[194,1,2]]]);
//# sourceMappingURL=main.b8bcaf26.chunk.js.map